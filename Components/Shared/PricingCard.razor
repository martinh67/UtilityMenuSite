<div class="card h-100 @(IsFeatured ? "border-primary shadow" : "") @ExtraCardClass">
    @if (IsFeatured)
    {
        <div class="card-header bg-primary text-white text-center small fw-semibold">
            MOST POPULAR
        </div>
    }
    else if (!string.IsNullOrWhiteSpace(HeaderLabel))
    {
        <div class="card-header @HeaderClass text-center small fw-semibold">
            @HeaderLabel
        </div>
    }
    <div class="card-body d-flex flex-column p-4">
        <h3 class="card-title fw-bold">@Title</h3>
        <div class="mb-3">
            <span class="fs-2 fw-bold">@Price</span>
            @if (!string.IsNullOrWhiteSpace(Period))
            {
                <span class="text-muted">/@Period</span>
            }
        </div>
        <p class="text-muted">@Description</p>
        <ul class="list-unstyled mb-4">
            @foreach (var feature in Features)
            {
                <li class="mb-2">
                    <i class="bi bi-check-circle-fill text-success me-2"></i>@feature
                </li>
            }
        </ul>
        <div class="mt-auto">
            @if (OnCtaClick.HasDelegate)
            {
                <button @onclick="OnCtaClick" class="btn @_ctaClass w-100">
                    @CtaLabel
                </button>
            }
            else
            {
                <a href="@CtaHref" class="btn @_ctaClass w-100">
                    @CtaLabel
                </a>
            }
        </div>
    </div>
</div>

@code {
    [Parameter] public string Title { get; set; } = string.Empty;
    [Parameter] public string Price { get; set; } = string.Empty;
    [Parameter] public string? Period { get; set; }
    [Parameter] public string Description { get; set; } = string.Empty;
    [Parameter] public List<string> Features { get; set; } = new();
    [Parameter] public string CtaLabel { get; set; } = "Get Started";
    [Parameter] public string CtaHref { get; set; } = "/pricing";
    [Parameter] public bool IsFeatured { get; set; }
    [Parameter] public EventCallback OnCtaClick { get; set; }

    /// <summary>Label shown in a header banner above the card (when not featured).</summary>
    [Parameter] public string? HeaderLabel { get; set; }

    /// <summary>Bootstrap CSS classes applied to the custom header banner.</summary>
    [Parameter] public string HeaderClass { get; set; } = "bg-warning text-dark";

    /// <summary>Extra CSS classes appended to the outer card element (e.g. "border-warning shadow-sm").</summary>
    [Parameter] public string? ExtraCardClass { get; set; }

    /// <summary>Override the CTA button class. Defaults to btn-primary (featured) or btn-outline-primary.</summary>
    [Parameter] public string? CtaBtnClass { get; set; }

    private string _ctaClass => CtaBtnClass ?? (IsFeatured ? "btn-primary" : "btn-outline-primary");
}
